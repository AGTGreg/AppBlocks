var AppBlock=function(){"use strict";function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}var t=function(e,t,n){var r,o=t[0],s=e;if(n&&o in n){if(!(t.length>1))return n[o];t.shift(),s=n[o]}else o in e.methods&&(t.shift(),r=e.methods[o](e));if(t.length>0)for(var a=0;a<t.length&&void 0!==(r=i(s,t[a]));a++)s=r;return e.debug&&console.info("Result for",t,":",r),r},n={getNode:function(e){return this.comp.el.querySelector(e)},getNodes:function(e){return this.comp.el.querySelectorAll(e)},appendIn:function(e,t){return t.innerHTML+=e},prependIn:function(e,t){return t.innerHTML=e+t.innerHTML}},i=function(e,t){var n=e[t];if(void 0===n){var i=t.match(/\[(.*?)\]/g);if(i)for(var r=e[t.split("[")[0]],o=0;o<i.length;o++){if(o>0&&(r=n),void 0===(n=r[i[o].split("[")[1].split("]")[0]]))break}}return n},r=function(n,i,r){if(!1!==/{([^}]+)}/.test(i)){e(r);var o=i.replace(/{|}/g,"").split("."),s=t(n,o,r);return void 0===s?"":s}},o=function(e,t,n){for(var i=t.attributes,o=0;o<i.length;o++)if(/{([^}]+)}/.test(i[o].value))for(var s=i[o].value.match(/{([^}]+)}/g),a=0;a<s.length;a++){var c=new RegExp(s[a],"g");i[o].value=i[o].value.replace(c,r(e,s[a],n))}},s=function(e,t,n){for(var i=document.createTreeWalker(t,NodeFilter.SHOW_TEXT,{acceptNode:function(e){if(/{([^}]+)}/.test(e.data))return NodeFilter.FILTER_ACCEPT}});i.nextNode();){for(var o=i.currentNode.nodeValue,s=o.match(/{([^}]+)}/g),a=0;a<s.length;a++)o=o.replace(s[a],r(e,s[a],n));i.currentNode.nodeValue=o}},a=function e(t,n,i){var r=n.attributes;if(r){for(var s=0;s<r.length;s++)if(r[s].name in t.directives){var a=r[s].name;if(!1===t.directives[a](t,n,i))return void n.remove()}o(t,n,i)}if(n.hasChildNodes())for(var c=n.childElementCount-1;c>=0&&n.children[c];c--)e(t,n.children[c],i)},c={"c-if":function(n,i,r){var o=i.getAttribute("c-if");null===o&&(o=i.getAttribute("c-ifnot"));var s=t(n,o.split("."),r);if(void 0===s)for(var a=[" == "," === "," !== "," != "," > "," < "," >= "," <= "],c=["boolean","number","undefined"],u=0;u<a.length;u++)if(o.includes(a[u])){var f=o,l=f.split(a[u]),d=t(n,l[0].split("."),r);if(!1===c.includes(String(e(d))))return n.debug&&console.warn(l[0]+" cannot be evaluated because it is not a boolean nor a number."),!1;f=f.replace(l[0],d),s=(0,eval)(f)}return!([void 0,null,!1,0,""].indexOf(s)>-1)&&(i.removeAttribute("c-if"),!0)},"c-ifnot":function(e,t,n){var i=!c["c-if"](e,t,n);return!0===i&&t.removeAttribute("c-ifnot"),i},"c-for":function(e,n,i){var r=n.getAttribute("c-for"),c=r.split(" in "),u=c[0],f=c[1].split(".");void 0===i&&(i={});var l=t(e,f,i);if(l){n.removeAttribute("c-for");for(var d=n.parentNode,h=0;h<l.length;h++){var v=l[h];i[u]=v;var g=n.cloneNode(!0);a(e,g,i),o(e,g,i),s(e,g,i),u=(c=r.split(" in "))[0],d.appendChild(g)}return n.remove(),!0}return!1}};return function(e){return this.debug=!1,this.setData=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];t?this.data=e:Object.assign(this.data,e),this.render()},this.resetState=function(){this.state.loading=!1,this.state.error=!1,this.state.success=!1},this.request=function(e,t,n){var i=this;if(!i.state.loading){var r,o=i.axiosConfig;e&&Object.assign(o,e),i.resetState(),i.state.loading=!0,i.render((function(){axios.request(o).then((function(e){if(i.state.success=!0,t&&t.success instanceof Function){var n=t.success(e);n instanceof Object&&(e=n)}r=e.data})).catch((function(e){i.state.error=!0,r=e,t&&t.error instanceof Function&&t.error(e)})).then((function(){i.state.loading=!1,i.setData(r,n),t&&t.done instanceof Function&&t.done()}))}))}},this.render=function(e){this.methods.beforeRender instanceof Function&&this.methods.beforeRender(this);var t=this.template.cloneNode(!0);a(this,t),s(this,t),this.el.innerHTML="",this.el.appendChild(t),this.methods.afterRender instanceof Function&&this.methods.afterRender(this),e instanceof Function&&e()},this.Init=function(){var t=this;if(e.debug&&(t.debug=!0),void 0===e)return!1;if(void 0!==e.el){if(null!==e.el){if(t.el=e.el,e.template)t.template=e.template.content;else for(t.template=document.createDocumentFragment();t.el.firstChild;)t.template.appendChild(t.el.firstChild);if(t.state={loading:!1,error:!1,success:!1},t.data={},e.data instanceof Object&&(t.data=e.data),t.utils=n,t.utils.comp=t,t.methods={Parent:t,isLoading:function(e){return e.state.loading},isSuccessful:function(e){return e.state.success},hasError:function(e){return e.state.error},beforeRender:function(e){},afterRender:function(e){}},e.methods instanceof Object&&Object.assign(t.methods,e.methods),t.directives=c,e.directives instanceof Object&&Object.assign(t.directives,e.directives),t.events={},e.events instanceof Object){Object.assign(t.events,e.events);var i=function(e){var n=e.split(" "),i=n[0],r=n[1];t.el.addEventListener(i,(function(n){t.el.querySelectorAll(r).forEach((function(i){n.srcElement===i&&t.events[e](n)}))}))};for(var r in t.events)i(r)}return t.events.Parent=t,t.axiosConfig={headers:{"X-Requested-With":"XMLHttpRequest"}},e.axiosConfig instanceof Object&&Object.assign(t.axiosConfig,e.axiosConfig),t.render(),t}t.debug&&console.warn("The element you assigned to el is not present. Current AppBlock is exiting.")}else t.debug&&console.warn("el is empty. Please assign a DOM element to el. Current AppBlock is exiting.")},this.Init()}}();
